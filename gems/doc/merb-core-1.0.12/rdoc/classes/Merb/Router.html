<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Merb::Router</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Merb::Router</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/merb-core/dispatch/router/behavior_rb.html">
                lib/merb-core/dispatch/router/behavior.rb
                </a>
        <br />
                <a href="../../files/lib/merb-core/dispatch/router/cached_proc_rb.html">
                lib/merb-core/dispatch/router/cached_proc.rb
                </a>
        <br />
                <a href="../../files/lib/merb-core/dispatch/router/resources_rb.html">
                lib/merb-core/dispatch/router/resources.rb
                </a>
        <br />
                <a href="../../files/lib/merb-core/dispatch/router/route_rb.html">
                lib/merb-core/dispatch/router/route.rb
                </a>
        <br />
                <a href="../../files/lib/merb-core/dispatch/router_rb.html">
                lib/merb-core/dispatch/router.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="../Object.html">
                Object
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
<a href="Router.html">Router</a> stores route definitions and finds the
first route that matches the incoming request URL.
</p>
<p>
Then information from route is used by dispatcher to call action on the
controller.
</p>
<h4>Routes compilation.</h4>
<p>
The most interesting method of <a href="Router.html">Router</a> (and heart
of route matching machinery) is match method generated on the fly from
routes definitions. It is called routes compilation. Generated match method
body contains one if/elsif statement that picks the first matching route
definition and sets values to named parameters of the route.
</p>
<p>
Compilation is synchronized by mutex.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000593">extensions</a>&nbsp;&nbsp;
      <a href="#M000588">prepare</a>&nbsp;&nbsp;
      <a href="#M000589">reset!</a>&nbsp;&nbsp;
      <a href="#M000592">resource</a>&nbsp;&nbsp;
      <a href="#M000590">route_for</a>&nbsp;&nbsp;
      <a href="#M000591">url</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Module <a href="Router/Resources.html" class="link">Merb::Router::Resources</a><br />
Class <a href="Router/Behavior.html" class="link">Merb::Router::Behavior</a><br />
Class <a href="Router/CachedProc.html" class="link">Merb::Router::CachedProc</a><br />
Class <a href="Router/GenerationError.html" class="link">Merb::Router::GenerationError</a><br />
Class <a href="Router/NotCompiledError.html" class="link">Merb::Router::NotCompiledError</a><br />
Class <a href="Router/RouteNotFound.html" class="link">Merb::Router::RouteNotFound</a><br />

    </div>


    <div id="aliases-list">
      <h3 class="section-bar">External Aliases</h3>

      <div class="name-list">
                        <table summary="aliases">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">match_before_compilation</td>
          <td>-&gt;</td>
          <td class="context-item-value">match</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">match_before_compilation</td>
          <td>-&gt;</td>
          <td class="context-item-value">match</td>
        </tr>
                        </table>
      </div>
    </div>


    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">around_match</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
A block that will be run around route matching. This block must yield in
order for the actual matching to happen.

<p>
:api: plugin
</p>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">named_routes</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
A hash containing all the named application routes. The names are absolute
(as in, all routes named in a namespace will contain the name of the
namespace).

<p>
:api: private
</p>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">resource_routes</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
A hash of all the application <a href="Router.html#M000592">resource</a>
routes. The key of the hash is an array with each element containing the
&quot;path&quot; for the <a href="Router.html#M000592">resource</a> for
example, given the following <a href="Router.html#M000592">resource</a>
routes:

<p>
resources :users do
</p>
<pre>
  resources :comments
</pre>
<p>
end
</p>
<p>
The show comment route will have a key of [&quot;User&quot;,
&quot;Comment&quot;]
</p>
<p>
:api: private
</p>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">root_behavior</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The starting point for route definition. Any route defined in a <a
href="Router.html#M000588">Merb::Router.prepare</a> block will defined in
context of this behavior.

<h4>Examples</h4>
<p>
Merb::Router.root_behavior =
Merb::Router.root_bavior.match(&quot;/hello&quot;)
</p>
<p>
In the previous example, all routes will have the path prefix /hello. It is
important to note that this attribute must be set before any routes are
defined in order for the behavior to be applied to the routes.
</p>
<p>
:api: plugin
</p>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">routes</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
An array containing all the application routes in order of priority.

<p>
:api: private
</p>
</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000593" class="method-detail">
        <a name="M000593"></a>

        <div class="method-heading">
          <a href="Router.src/M000593.html" target="Code" class="method-signature"
            onclick="popupCode('Router.src/M000593.html');return false;">
          <span class="method-name">extensions</span><span class="method-args">(&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Add functionality to the router. This can be in the form of including a new
module or directly defining new methods.
</p>
<h4>Parameters</h4>
<table>
<tr><td valign="top">&amp;block&lt;Block&gt;:</td><td>A block of code used to extend the route builder with. This can be
including a module or directly defining some new methods that should be
available to building routes.

</td></tr>
</table>
<h4>Returns</h4>
<p>
nil
</p>
<h4>Example</h4>
<pre>
  Merb::Router.extensions do
    def domain(name, domain, options={}, &amp;block)
      match(:domain =&gt; domain).namespace(name, :path =&gt; nil, &amp;block)
    end
  end
</pre>
<p>
In this case, a method &#8216;domain&#8217; will be available to the route
builder which will create namespaces around domains instead of path
prefixes.
</p>
<p>
This can then be used as follows.
</p>
<pre>
  Merb::Router.prepare do
    domain(:admin, &quot;my-admin.com&quot;) do
      # ... routes come here ...
    end
  end
</pre>
<p>
:api: public
</p>
        </div>
      </div>

      <div id="method-M000588" class="method-detail">
        <a name="M000588"></a>

        <div class="method-heading">
          <a href="Router.src/M000588.html" target="Code" class="method-signature"
            onclick="popupCode('Router.src/M000588.html');return false;">
          <span class="method-name">prepare</span><span class="method-args">(first = [], last = [], &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a route building context and evaluates the block in it. A copy of
<tt>root_behavior</tt> (and instance of <a
href="Router/Behavior.html">Behavior</a>) is copied as the context.
</p>
<h4>Parameters</h4>
<table>
<tr><td valign="top">first&lt;Array&gt;:</td><td>An array containing routes that should be prepended to the routes defined
in the block.

</td></tr>
<tr><td valign="top">last&lt;Array&gt;:</td><td>An array containing routes that should be appended to the routes defined in
the block.

</td></tr>
</table>
<h4>Returns</h4>
<table>
<tr><td valign="top"><a href="Router.html">Merb::Router</a>:</td><td>Returns self to allow chaining of methods.

</td></tr>
</table>
<p>
:api: public
</p>
        </div>
      </div>

      <div id="method-M000589" class="method-detail">
        <a name="M000589"></a>

        <div class="method-heading">
          <a href="Router.src/M000589.html" target="Code" class="method-signature"
            onclick="popupCode('Router.src/M000589.html');return false;">
          <span class="method-name">reset!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Clears the routing table. Route generation and request matching won&#8216;t
work anymore until a new routing table is built.
</p>
<p>
:api: private
</p>
        </div>
      </div>

      <div id="method-M000592" class="method-detail">
        <a name="M000592"></a>

        <div class="method-heading">
          <a href="Router.src/M000592.html" target="Code" class="method-signature"
            onclick="popupCode('Router.src/M000592.html');return false;">
          <span class="method-name">resource</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Generates a URL from the <a href="Router.html#M000592">resource</a>(s)
</p>
<h4>Parameters</h4>
<table>
<tr><td valign="top">resources&lt;Symbol,<a href="../Object.html">Object</a>&gt;:</td><td>The identifiers for the <a href="Router.html#M000592">resource</a> route to
generate. These can either be symbols or objects. Symbols denote <a
href="Router.html#M000592">resource</a> collection routes and objects
denote the members.

</td></tr>
<tr><td valign="top">params&lt;<a href="../Hash.html">Hash</a>&gt;:</td><td>Any extra parameters needed to generate the route.

</td></tr>
</table>
<h4>Returns</h4>
<table>
<tr><td valign="top"><a href="../String.html">String</a>:</td><td>The generated URL

</td></tr>
</table>
<p>
:api: plugin
</p>
        </div>
      </div>

      <div id="method-M000590" class="method-detail">
        <a name="M000590"></a>

        <div class="method-heading">
          <a href="Router.src/M000590.html" target="Code" class="method-signature"
            onclick="popupCode('Router.src/M000590.html');return false;">
          <span class="method-name">route_for</span><span class="method-args">(request)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Finds route matching URI of the request and returns a tuple of [route
index, route params]. This method is called by the dispatcher and
isn&#8216;t as useful in applications.
</p>
<h4>Parameters</h4>
<table>
<tr><td valign="top">request&lt;<a href="Request.html">Merb::Request</a>&gt;:</td><td>request to match.

</td></tr>
</table>
<h4>Returns</h4>
<table>
<tr><td valign="top">Array[Integer, <a href="../Hash.html">Hash</a>]:</td><td>Two-tuple: route index and route parameters. Route parameters are
:controller, :action and all the named segments of the route.

</td></tr>
</table>
<p>
:api: private
</p>
        </div>
      </div>

      <div id="method-M000591" class="method-detail">
        <a name="M000591"></a>

        <div class="method-heading">
          <a href="Router.src/M000591.html" target="Code" class="method-signature"
            onclick="popupCode('Router.src/M000591.html');return false;">
          <span class="method-name">url</span><span class="method-args">(name, *args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
There are three possible ways to use this method. First, if you have a
named route, you can specify the route as the first parameter as a symbol
and any paramters in a hash. Second, you can generate the default route by
just passing the params hash, just passing the params hash. Finally, you
can use the anonymous parameters. This allows you to specify the parameters
to a named route in the order they appear in the router.
</p>
<h4>Parameters(Named Route)</h4>
<table>
<tr><td valign="top">name&lt;Symbol&gt;:</td><td>The name of the route.

</td></tr>
<tr><td valign="top">args&lt;<a href="../Hash.html">Hash</a>&gt;:</td><td>Parameters for the route generation.

</td></tr>
</table>
<h4>Parameters(Default Route)</h4>
<table>
<tr><td valign="top">args&lt;<a href="../Hash.html">Hash</a>&gt;:</td><td>Parameters for the route generation. This route will use the default route.

</td></tr>
</table>
<h4>Parameters(Anonymous Parameters)</h4>
<table>
<tr><td valign="top">name&lt;Symbol&gt;:</td><td>The name of the route.

</td></tr>
<tr><td valign="top">args&lt;Array&gt;:</td><td>An array of anonymous parameters to generate the route with. These
parameters are assigned to the route parameters in the order that they are
passed.

</td></tr>
</table>
<h4>Returns</h4>
<table>
<tr><td valign="top"><a href="../String.html">String</a>:</td><td>The generated URL.

</td></tr>
</table>
<h4>Examples</h4>
<p>
Named Route
</p>
<p>
<a href="Router.html#M000588">Merb::Router.prepare</a> do
</p>
<pre>
  match(&quot;/articles/:title&quot;).to(:controller =&gt; :articles, :action =&gt; :show).name(&quot;articles&quot;)
</pre>
<p>
end
</p>
<p>
<a href="Router.html#M000591">url</a>(:articles, :title =&gt;
&quot;new_article&quot;)
</p>
<p>
Default Route
</p>
<p>
<a href="Router.html#M000588">Merb::Router.prepare</a> do
</p>
<pre>
  default_routes
</pre>
<p>
end
</p>
<p>
<a href="Router.html#M000591">url</a>(:controller =&gt;
&quot;articles&quot;, :action =&gt; &quot;new&quot;)
</p>
<p>
Anonymous Paramters
</p>
<p>
<a href="Router.html#M000588">Merb::Router.prepare</a> do
</p>
<pre>
  match(&quot;/articles/:year/:month/:title&quot;).to(:controller =&gt; :articles, :action =&gt; :show).name(&quot;articles&quot;)
</pre>
<p>
end
</p>
<p>
<a href="Router.html#M000591">url</a>(:articles, 2008, 10,
&quot;test_article&quot;)
</p>
<p>
:api: plugin
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>